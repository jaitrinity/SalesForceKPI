<!-- <p>dashboard works!</p>
<div *ngFor="let k of kpiData">{{k.a}}-{{k.b}}-{{k.c}}-{{k.d}}</div> -->

<!-- <mat-tab-group>
    <mat-tab label="Visit Status">Content 1</mat-tab>
    <mat-tab label="Attendance Status">Content 2</mat-tab>
</mat-tab-group> -->

<div class="row">
    <div class="col-md-5">
      <label>Period</label>
      <select class="form-control" [(ngModel)]="period" (change)="getKpiData()">
        <option value="MTD">MTD</option>
        <option value="QTD">QTD</option>
        <option value="YTD">YTD</option>
      </select>
    </div>  
</div>

<div class="row">
    <div class="col-md-12">
      <mat-progress-bar mode="indeterminate" *ngIf="inProgress"></mat-progress-bar>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="mat-elevation-z8">
            <table mat-table [dataSource]="kpiData">
              <!-- Type Column -->
              <ng-container matColumnDef="Type">
                <th mat-header-cell *matHeaderCellDef> Type </th>
                <td mat-cell *matCellDef="let element"> {{element.type}} </td>
              </ng-container>
          
              <!-- Registration Column -->
              <ng-container matColumnDef="Registration">
                <th mat-header-cell *matHeaderCellDef> Reg. </th>
                <td mat-cell *matCellDef="let element"> {{element.total}} </td>
              </ng-container>
          
              <!-- Total_Visit Column -->
              <ng-container matColumnDef="Total_Visit">
                <th mat-header-cell *matHeaderCellDef> T_Visit </th>
                <td mat-cell *matCellDef="let element"> {{element.total_visit}} </td>
              </ng-container>

              <!-- Total_Unique_Visit Column -->
              <ng-container matColumnDef="Total_Unique_Visit">
                <th mat-header-cell *matHeaderCellDef> T_Unique_Visit </th>
                <td mat-cell *matCellDef="let element"> {{element.total_unique_visit}} </td>
              </ng-container>

              <!-- Pending Column -->
              <ng-container matColumnDef="Pending">
                <th mat-header-cell *matHeaderCellDef> Pending </th>
                <td mat-cell *matCellDef="let element"> 
                    <button mat-fab color="accent" *ngIf="element.pending !=0 && element.type != 'Total' " (click)="getPendingData(element.type)">{{element.pending}}</button>
                    <span *ngIf="!(element.pending !=0 && element.type != 'Total') ">{{element.pending}}</span>
                </td>
              </ng-container>
          
              <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
              <tr mat-row [@rowsAnimation]="" *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
          </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="mat-elevation-z8">
            <table mat-table [dataSource]="attendanceData">
              <!-- Type Column -->
              <ng-container matColumnDef="Type">
                <th mat-header-cell *matHeaderCellDef> Type </th>
                <td mat-cell *matCellDef="let element"> {{element.type}} </td>
              </ng-container>
          
              <!-- Total_Attendance Column -->
              <ng-container matColumnDef="Total_Attendance">
                <th mat-header-cell *matHeaderCellDef> Total_Attendance </th>
                <td mat-cell *matCellDef="let element"> {{element.total}} </td>
              </ng-container>
          
                     
              <!-- <tr mat-header-row *matHeaderRowDef="attendanceDisColumn; sticky: true"></tr> -->
              <tr mat-row [@rowsAnimation]="" *matRowDef="let row; columns: attendanceDisColumn;"></tr>
            </table>
          </div>
    </div>
</div>